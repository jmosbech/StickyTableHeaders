(function(e,i){"use strict";function t(t,o){var l=this;l.$el=e(t),l.el=t,l.$el.bind("destroyed",e.proxy(l.teardown,l)),l.$window=e(i),l.$clonedHeader=null,l.$originalHeader=null,l.isCloneVisible=!1,l.leftOffset=null,l.topOffset=null,l.init=function(){l.options=e.extend({},d,o),l.$el.each(function(){var i=e(this);i.css("padding",0),l.$originalHeader=e("thead:first",this),l.$clonedHeader=l.$originalHeader.clone(),l.$clonedHeader.addClass("tableFloatingHeader"),l.$clonedHeader.css({position:"fixed",top:0,"z-index":1,display:"none"}),l.$originalHeader.addClass("tableFloatingHeaderOriginal"),l.$originalHeader.after(l.$clonedHeader),e("th",l.$clonedHeader).on("click."+n,function(){var i=e("th",l.$clonedHeader).index(this);e("th",l.$originalHeader).eq(i).click()}),i.on("sortEnd."+n,l.updateWidth),l.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{visibility:visible !important;}</style>'),e("head").append(l.$printStyle)}),l.updateWidth(),l.toggleHeaders(),l.bind()},l.destroy=function(){l.$el.unbind("destroyed",l.teardown),l.teardown()},l.teardown=function(){e.removeData(l.el,"plugin_"+n),l.unbind(),l.$clonedHeader.remove(),l.$originalHeader.removeClass("tableFloatingHeaderOriginal"),l.$originalHeader.css("visibility","visible"),l.$printStyle.remove(),l.el=null,l.$el=null},l.bind=function(){l.$window.on("scroll."+n,l.toggleHeaders),l.$window.on("resize."+n,l.toggleHeaders),l.$window.on("resize."+n,l.updateWidth)},l.unbind=function(){l.$window.off("."+n,l.toggleHeaders),l.$window.off("."+n,l.updateWidth),l.$el.off("."+n),l.$el.find("*").off("."+n)},l.toggleHeaders=function(){l.$el.each(function(){var i=e(this),t=isNaN(l.options.fixedOffset)?l.options.fixedOffset.height():l.options.fixedOffset,n=i.offset(),d=l.$window.scrollTop()+t,o=l.$window.scrollLeft();if(d>n.top&&n.top+i.height()-l.$clonedHeader.height()>d){var a=n.left-o;if(l.isCloneVisible&&a===l.leftOffset&&t===l.topOffset)return;l.$clonedHeader.css({top:t,"margin-top":0,left:a,display:"block"}),l.$originalHeader.css("visibility","hidden"),l.isCloneVisible=!0,l.leftOffset=a,l.topOffset=t}else l.isCloneVisible&&(l.$clonedHeader.css("display","none"),l.$originalHeader.css("visibility","visible"),l.isCloneVisible=!1)})},l.updateWidth=function(){e("th",l.$clonedHeader).each(function(i){var t=e(this),n=e("th",l.$originalHeader).eq(i);this.className=n.attr("class")||"",t.css({"min-width":n.width(),"max-width":n.width()})}),l.$clonedHeader.css("width",l.$originalHeader.width())},l.updateOptions=function(i){l.options=e.extend({},d,i),l.updateWidth(),l.toggleHeaders()},l.init()}var n="stickyTableHeaders",d={fixedOffset:0};e.fn[n]=function(i){return this.each(function(){var d=e.data(this,"plugin_"+n);d?"string"==typeof i?d[i].apply(d):d.updateOptions(i):"destroy"!==i&&e.data(this,"plugin_"+n,new t(this,i))})}})(jQuery,window);