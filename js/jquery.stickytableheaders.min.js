/*! Copyright (c) 2011 by Jonas Mosbech - https://github.com/jmosbech/StickyTableHeaders
	MIT license info: https://github.com/jmosbech/StickyTableHeaders/blob/master/license.txt */(function(e,t,n){"use strict";function o(n,o){var u=this;u.$el=e(n);u.el=n;u.id=i++;u.$el.bind("destroyed",e.proxy(u.teardown,u));u.$clonedHeader=null;u.$originalHeader=null;u.isSticky=!1;u.hasBeenSticky=!1;u.leftOffset=null;u.topOffset=null;u.init=function(){u.options=e.extend({},s,o);u.$el.each(function(){var t=e(this);t.css("padding",0);u.$scrollableArea=e(u.options.scrollableArea);u.$originalHeader=e("thead:first",this);u.$clonedHeader=u.$originalHeader.clone();u.$clonedHeader.addClass("tableFloatingHeader");u.$clonedHeader.css("display","none");u.$originalHeader.addClass("tableFloatingHeaderOriginal");u.$originalHeader.after(u.$clonedHeader);u.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>');e("head").append(u.$printStyle)});u.updateWidth();u.toggleHeaders();u.bind()};u.destroy=function(){u.$el.unbind("destroyed",u.teardown);u.teardown()};u.teardown=function(){u.isSticky&&u.$originalHeader.css("position","static");e.removeData(u.el,"plugin_"+r);u.unbind();u.$clonedHeader.remove();u.$originalHeader.removeClass("tableFloatingHeaderOriginal");u.$originalHeader.css("visibility","visible");u.$printStyle.remove();u.el=null;u.$el=null};u.bind=function(){u.$scrollableArea.on("scroll."+r,u.toggleHeaders);if(u.$scrollableArea[0]!==t){e(t).on("scroll."+r+u.id,u.setPositionValues);e(t).on("resize."+r+u.id,u.toggleHeaders)}u.$scrollableArea.on("resize."+r,u.toggleHeaders);u.$scrollableArea.on("resize."+r,u.updateWidth)};u.unbind=function(){u.$scrollableArea.off("."+r,u.toggleHeaders);if(u.$scrollableArea[0]!==t){e(t).off("."+r+u.id,u.setPositionValues);e(t).off("."+r+u.id,u.toggleHeaders)}u.$scrollableArea.off("."+r,u.updateWidth);u.$el.off("."+r);u.$el.find("*").off("."+r)};u.toggleHeaders=function(){u.$el&&u.$el.each(function(){var n=e(this),r,i=u.$scrollableArea[0]===t?isNaN(u.options.fixedOffset)?u.options.fixedOffset.height():u.options.fixedOffset:u.$scrollableArea.offset().top+(isNaN(u.options.fixedOffset)?0:u.options.fixedOffset),s=n.offset(),o=u.$scrollableArea.scrollTop()+i,a=u.$scrollableArea.scrollLeft(),f=u.$scrollableArea[0]===t?o>s.top:i>s.top,l=(u.$scrollableArea[0]===t?o:0)<s.top+n.height()-u.$clonedHeader.height()-(u.$scrollableArea[0]===t?0:i);if(f&&l){r=s.left-a+u.options.leftOffset;u.$originalHeader.css({position:"fixed","margin-top":0,left:r,"z-index":1});u.isSticky=!0;u.leftOffset=r;u.topOffset=i;u.setPositionValues();u.$clonedHeader.css("display","");u.updateWidth()}else if(u.isSticky){u.$originalHeader.css("position","static");u.$clonedHeader.css("display","none");u.isSticky=!1;u.resetWidth(e("td,th",u.$clonedHeader),e("td,th",u.$originalHeader))}})};u.setPositionValues=function(){var n=e(t).scrollTop(),r=e(t).scrollLeft();if(!u.isSticky||n<0||n+e(t).height()>e(document).height()||r<0||r+e(t).width()>e(document).width())return;u.$originalHeader.css({top:u.topOffset-(u.$scrollableArea[0]===t?0:n),left:u.leftOffset-(u.$scrollableArea[0]===t?0:r)})};u.updateWidth=function(){if(!u.isSticky)return;var t=e("th,td",u.$originalHeader),n=e("th,td",u.$clonedHeader);u.cellWidths=[];u.getWidth(n);u.setWidth(n,t);u.$originalHeader.css("width",u.$clonedHeader.width())};u.getWidth=function(t){t.each(function(t){var n,r=e(this);r.css("box-sizing")==="border-box"?n=r.outerWidth():n=r.width();u.cellWidths[t]=n})};u.setWidth=function(e,t){e.each(function(e){var n=u.cellWidths[e];t.eq(e).css({"min-width":n,"max-width":n})})};u.resetWidth=function(t,n){t.each(function(t){var r=e(this);n.eq(t).css({"min-width":r.css("min-width"),"max-width":r.css("max-width")})})};u.updateOptions=function(t){u.options=e.extend({},s,t);u.updateWidth();u.toggleHeaders()};u.init()}var r="stickyTableHeaders",i=0,s={fixedOffset:0,leftOffset:0,scrollableArea:t};e.fn[r]=function(t){return this.each(function(){var n=e.data(this,"plugin_"+r);n?typeof t=="string"?n[t].apply(n):n.updateOptions(t):t!=="destroy"&&e.data(this,"plugin_"+r,new o(this,t))})}})(jQuery,window);