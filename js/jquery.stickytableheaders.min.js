!function(a,b){"use strict";function c(c,g){var h=this;h.$el=a(c),h.el=c,h.id=e++,h.$el.bind("destroyed",a.proxy(h.teardown,h)),h.$clonedHeader=null,h.$originalHeader=null,h.isSticky=!1,h.hasBeenSticky=!1,h.leftOffset=null,h.topOffset=null,h.init=function(){h.options=a.extend({},f,g),h.$el.each(function(){var b=a(this);b.css("padding",0),h.$scrollableArea=a(h.options.scrollableArea),h.$originalHeader=a(h.options.headSelector,this),h.$clonedHeader=h.$originalHeader.clone(),b.trigger("clonedHeader."+d,[h.$clonedHeader]),h.$clonedHeader.addClass("tableFloatingHeader"),h.$clonedHeader.css("display","none"),h.$originalHeader.addClass("tableFloatingHeaderOriginal"),h.$originalHeader.after(h.$clonedHeader),h.$printStyle=a('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),a("head").append(h.$printStyle)}),h.updateWidth(),h.toggleHeaders(),h.bind()},h.destroy=function(){h.$el.unbind("destroyed",h.teardown),h.teardown()},h.teardown=function(){h.isSticky&&h.$originalHeader.css("position","static"),a.removeData(h.el,"plugin_"+d),h.unbind(),h.$clonedHeader.remove(),h.$originalHeader.removeClass("tableFloatingHeaderOriginal"),h.$originalHeader.css("visibility","visible"),h.$printStyle.remove(),h.el=null,h.$el=null},h.bind=function(){h.$scrollableArea.on("scroll."+d,h.toggleHeaders),h.$scrollableArea[0]!==b&&(a(b).on("scroll."+d+h.id,h.setPositionValues),a(b).on("resize."+d+h.id,h.toggleHeaders)),h.$scrollableArea.on("resize."+d,h.toggleHeaders),h.$scrollableArea.on("resize."+d,h.updateWidth)},h.unbind=function(){h.$scrollableArea.off("."+d,h.toggleHeaders),h.$scrollableArea[0]!==b&&(a(b).off("."+d+h.id,h.setPositionValues),a(b).off("."+d+h.id,h.toggleHeaders)),h.$scrollableArea.off("."+d,h.updateWidth),h.$el.off("."+d),h.$el.find("*").off("."+d)},h.toggleHeaders=function(){h.$el&&h.$el.each(function(){var c,d=a(this),e=h.$scrollableArea[0]===b?isNaN(h.options.fixedOffset)?h.options.fixedOffset.height():h.options.fixedOffset:h.$scrollableArea.offset().top+(isNaN(h.options.fixedOffset)?0:h.options.fixedOffset),f=d.offset(),g=h.$scrollableArea.scrollTop()+e,i=h.$scrollableArea.scrollLeft(),j=h.$scrollableArea[0]===b?g>f.top:e>f.top,k=(h.$scrollableArea[0]===b?g:0)<f.top+d.height()-h.$clonedHeader.height()-(h.$scrollableArea[0]===b?0:e);j&&k?(c=f.left-i+h.options.leftOffset,h.setPositionValues(),h.$originalHeader.css({position:"fixed","margin-top":0,left:c,"z-index":1}),h.isSticky=!0,h.leftOffset=c,h.topOffset=e,h.$clonedHeader.css("display",""),h.updateWidth()):h.isSticky&&(h.$originalHeader.css("position","static"),h.$clonedHeader.css("display","none"),h.isSticky=!1,h.resetWidth(a(h.options.cellSelector,h.$clonedHeader),a(h.options.cellSelector,h.$originalHeader)))})},h.setPositionValues=function(){var c=a(b).scrollTop(),d=a(b).scrollLeft();!h.isSticky||0>c||c+a(b).height()>a(document).height()||0>d||d+a(b).width()>a(document).width()||h.$originalHeader.css({top:h.topOffset-(h.$scrollableArea[0]===b?0:c),left:h.leftOffset-(h.$scrollableArea[0]===b?0:d)})},h.updateWidth=function(){if(h.isSticky){var b=a(h.options.cellSelector,h.$originalHeader),c=a(h.options.cellSelector,h.$clonedHeader);h.cellWidths=[],h.getWidth(c),h.setWidth(c,b),h.$originalHeader.css("width",h.$clonedHeader.width())}},h.getWidth=function(b){b.each(function(b){var c,d=a(this);c="border-box"===d.css("box-sizing")?d.outerWidth():d.width(),h.cellWidths[b]=c})},h.setWidth=function(a,b){a.each(function(a){var c=h.cellWidths[a];b.eq(a).css({"min-width":c,"max-width":c})})},h.resetWidth=function(b,c){b.each(function(b){var d=a(this);c.eq(b).css({"min-width":d.css("min-width"),"max-width":d.css("max-width")})})},h.updateOptions=function(b){h.options=a.extend({},f,b),h.updateWidth(),h.toggleHeaders()},h.init()}var d="stickyTableHeaders",e=0,f={fixedOffset:0,leftOffset:0,scrollableArea:b,headSelector:"thead:first",cellSelector:"th,td"};a.fn[d]=function(b){return this.each(function(){var e=a.data(this,"plugin_"+d);e?"string"==typeof b?e[b].apply(e):e.updateOptions(b):"destroy"!==b&&a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window);