(function(e,i){"use strict";function n(n,d){var l=this;l.$el=e(n),l.el=n,l.$el.bind("destroyed",e.proxy(l.teardown,l)),l.$window=e(i),l.$clonedHeader=null,l.$originalHeader=null,l.isCloneVisible=!1,l.leftOffset=null,l.topOffset=null,l.init=function(){l.options=e.extend({},o,d),l.$el.each(function(){var i=e(this);i.css("padding",0),l.$originalHeader=e("thead:first",this),l.$clonedHeader=l.$originalHeader.clone(),l.$clonedHeader.addClass("tableFloatingHeader"),l.$clonedHeader.css({position:"fixed",top:0,"z-index":1,display:"none"}),l.$originalHeader.addClass("tableFloatingHeaderOriginal"),l.$originalHeader.after(l.$clonedHeader),e("th",l.$clonedHeader).on("click."+t,function(){var i=e("th",l.$clonedHeader).index(this);e("th",l.$originalHeader).eq(i).click()}),i.on("sortEnd."+t,l.updateWidth)}),l.updateWidth(),l.toggleHeaders(),l.bind()},l.destroy=function(){l.$el.unbind("destroyed",l.teardown),l.teardown()},l.teardown=function(){e.removeData(l.el,"plugin_"+t),l.unbind(),l.$clonedHeader.remove(),l.$originalHeader.removeClass("tableFloatingHeaderOriginal"),l.$originalHeader.css("visibility","visible"),l.el=null,l.$el=null},l.bind=function(){l.$window.on("scroll."+t,l.toggleHeaders),l.$window.on("resize."+t,l.toggleHeaders),l.$window.on("resize."+t,l.updateWidth)},l.unbind=function(){l.$window.off("."+t,l.toggleHeaders),l.$window.off("."+t,l.updateWidth),l.$el.off("."+t),l.$el.find("*").off("."+t)},l.toggleHeaders=function(){l.$el.each(function(){var i=e(this),n=isNaN(l.options.fixedOffset)?l.options.fixedOffset.height():l.options.fixedOffset,t=i.offset(),o=l.$window.scrollTop()+n,d=l.$window.scrollLeft();if(o>t.top&&t.top+i.height()>o){var a=t.left-d;if(l.isCloneVisible&&a===l.leftOffset&&n===l.topOffset)return;l.$clonedHeader.css({top:n,"margin-top":0,left:a,display:"block"}),l.$originalHeader.css("visibility","hidden"),l.isCloneVisible=!0,l.leftOffset=a,l.topOffset=n}else l.isCloneVisible&&(l.$clonedHeader.css("display","none"),l.$originalHeader.css("visibility","visible"),l.isCloneVisible=!1)})},l.updateWidth=function(){e("th",l.$clonedHeader).each(function(i){var n=e(this),t=e("th",l.$originalHeader).eq(i);this.className=t.attr("class")||"",n.css("width",t.width())}),l.$clonedHeader.css("width",l.$originalHeader.width())},l.init()}var t="stickyTableHeaders",o={fixedOffset:0};e.fn[t]=function(i){return this.each(function(){var o=e.data(this,"plugin_"+t);o?"string"==typeof i&&o[i].apply(o):"destroy"!==i&&e.data(this,"plugin_"+t,new n(this,i))})}})(jQuery,window);